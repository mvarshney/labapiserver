apiVersion: v1
kind: ConfigMap
metadata:
  name: locust-script
  namespace: default
data:
  locustfile.py: |
    from locust import HttpUser, task, between
    import random

    class LabAPIUser(HttpUser):
        wait_time = between(1, 3)  # Wait 1-3 seconds between requests
        
        @task(3)  # Weight: 3x more likely than other tasks
        def calculate_tax(self):
            payload = {
                "amount": random.uniform(10, 1000),
                "zip_code": "94105"
            }
            self.client.post("/salestax", json=payload)
        
        @task(1)
        def health_check(self):
            self.client.get("/health")
